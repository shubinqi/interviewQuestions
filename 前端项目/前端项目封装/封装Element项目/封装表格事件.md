<!--
 * @Author: Shu Binqi
 * @Date: 2023-04-03 19:45:33
 * @LastEditors: Shu Binqi
 * @LastEditTime: 2023-04-03 20:01:25
 * @Description: beforeTableRender 事件
 * @Version: 1.0.0
 * @FilePath: \interviewQuestions\前端项目\前端项目封装\封装Element项目\封装表格事件.md
-->

#### 封装 elementui 表格的 beforeTableRender 事件

Element UI 表格组件提供了 before-table-render 事件，该事件会在表格渲染前触发，我们可以在该事件中进行一些自定义的操作逻辑。

下面是一个简单的示例，演示了如何在 Vue 项目中封装 before-table-render 事件：

```
<template>
  <el-table :data="tableData" @before-table-render="onBeforeTableRender">
    <el-table-column prop="date" label="日期" width="180"></el-table-column>
    <el-table-column prop="name" label="姓名" width="180"></el-table-column>
    <el-table-column prop="address" label="地址"></el-table-column>
  </el-table>
</template>

<script>
export default {
  data() {
    return {
      tableData: [
        {
          date: "2023-04-03",
          name: "John",
          address: "New York",
        },
        {
          date: "2023-04-02",
          name: "Jane",
          address: "Paris",
        },
        {
          date: "2023-04-01",
          name: "Bob",
          address: "London",
        },
      ],
    };
  },
  methods: {
    onBeforeTableRender({ columns, data }) {
      console.log("beforeTableRender", columns, data);

      // 在这里可以对 columns 和 data 进行一些自定义的操作逻辑

      // 操作完成后需要调用 next() 方法，以继续执行表格的渲染过程
      next();
    },
  },
};
</script>
```

在上面的代码中，我们在 el-table 标签上监听了 before-table-render 事件，并定义了一个名为 onBeforeTableRender 的回调函数，该函数会在表格渲染前触发。

在 onBeforeTableRender 回调函数中，我们可以获取到表格的 columns 和 data 数据，并可以进行自定义的操作逻辑。在操作完成后，需要调用 next() 方法，以继续执行表格的渲染过程。

#### 封装 elementui 表格的 beforeTableRowRender 事件

Element UI 表格组件还提供了 before-row-render 事件，该事件会在表格每行数据渲染前触发，我们可以在该事件中对每行数据进行自定义的操作逻辑。

下面是一个简单的示例，演示了如何在 Vue 项目中封装 before-row-render 事件：

```
<template>
  <el-table :data="tableData" @before-row-render="onBeforeTableRowRender">
    <el-table-column prop="date" label="日期" width="180"></el-table-column>
    <el-table-column prop="name" label="姓名" width="180"></el-table-column>
    <el-table-column prop="address" label="地址"></el-table-column>
  </el-table>
</template>

<script>
export default {
  data() {
    return {
      tableData: [
        {
          date: "2023-04-03",
          name: "John",
          address: "New York",
        },
        {
          date: "2023-04-02",
          name: "Jane",
          address: "Paris",
        },
        {
          date: "2023-04-01",
          name: "Bob",
          address: "London",
        },
      ],
    };
  },
  methods: {
    onBeforeTableRowRender({ row, $index }) {
      console.log("beforeTableRowRender", row, $index);

      // 在这里可以对当前行的数据进行自定义的操作逻辑

      // 操作完成后需要调用 next() 方法，以继续执行当前行数据的渲染过程
      next();
    },
  },
};
</script>
```

在上面的代码中，我们在 el-table 标签上监听了 before-row-render 事件，并定义了一个名为 onBeforeTableRowRender 的回调函数，该函数会在每行数据渲染前触发。

在 onBeforeTableRowRender 回调函数中，我们可以获取到当前行的数据 row 和索引 $index，并可以对其进行自定义的操作逻辑。在操作完成后，需要调用 next() 方法，以继续执行当前行数据的渲染过程。

#### 封装 elementui 表格的 sizeChange 和 currentChange 事件

Element UI 表格组件还提供了 size-change 和 current-change 事件，用于在表格的分页或排序发生变化时触发。我们可以在这两个事件中添加自己的业务逻辑。

下面是一个简单的示例，演示了如何在 Vue 项目中封装 size-change 和 current-change 事件：

```
<template>
  <el-table :data="tableData" :page-sizes="pageSizes" :page-size="pageSize" :total="total" @size-change="onSizeChange" @current-change="onCurrentChange">
    <el-table-column prop="date" label="日期" width="180"></el-table-column>
    <el-table-column prop="name" label="姓名" width="180"></el-table-column>
    <el-table-column prop="address" label="地址"></el-table-column>
  </el-table>
</template>

<script>
export default {
  data() {
    return {
      tableData: [
        {
          date: "2023-04-03",
          name: "John",
          address: "New York",
        },
        {
          date: "2023-04-02",
          name: "Jane",
          address: "Paris",
        },
        {
          date: "2023-04-01",
          name: "Bob",
          address: "London",
        },
      ],
      pageSizes: [10, 20, 30, 40],
      pageSize: 10,
      total: 3,
    };
  },
  methods: {
    onSizeChange(pageSize) {
      console.log("sizeChange", pageSize);

      // 在这里可以添加自己的业务逻辑

      // 操作完成后需要重新获取表格数据并更新 total 属性
      this.total = this.tableData.length;
    },
    onCurrentChange(currentPage) {
      console.log("currentChange", currentPage);

      // 在这里可以添加自己的业务逻辑

      // 操作完成后需要重新获取表格数据并更新 total 属性
      this.total = this.tableData.length;
    },
  },
};
</script>
```

在上面的代码中，我们在 el-table 标签上监听了 size-change 和 current-change 事件，并定义了名为 onSizeChange 和 onCurrentChange 的回调函数，分别会在分页和排序发生变化时触发。

在回调函数中，我们可以添加自己的业务逻辑，并在操作完成后重新获取表格数据并更新 total 属性，以保证分页和排序的正确显示。
