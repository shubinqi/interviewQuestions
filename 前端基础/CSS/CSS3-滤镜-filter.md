<!--
 * @Author: Shu Binqi
 * @Date: 2023-03-13 22:58:14
 * @LastEditors: Shu Binqi
 * @LastEditTime: 2023-03-20 19:38:04
 * @Description: CSS3 滤镜 Filter
 * @Version: 1.0.0
 * @FilePath: \interviewQuestions\前端基础\CSS\CSS3-滤镜-filter.md
-->

#### 滤镜是什么？有什么特点？

**滤镜**（Filter）是一种可以对元素进行图像处理的 CSS 属性。它可以在元素的显示效果上增加、减少、修改一些视觉上的特性，比如**颜色、亮度、对比度、模糊**等等。滤镜可以用来实现很多特效，比如**黑白、模糊、边缘检测**等等。

滤镜有以下几个特点：

1. 可以用来增强元素的视觉效果，比如让图片更加鲜艳、清晰等。
1. 可以实现很多特效，比如黑白、模糊、边缘检测等等。
1. 可以提高用户体验，比如对于需要高亮显示的内容可以使用滤镜来实现。
1. 可以减少网站的加载时间，因为使用滤镜可以避免使用图片等其他资源。

常用的滤镜属性和方法：

1. **blur()**：实现高斯模糊效果，接收一个参数表示模糊半径。
1. **brightness()**：调整图像的亮度，接收一个参数表示亮度值，取值范围为 0 到 1。
1. **contrast()**：调整图像的对比度，接收一个参数表示对比度值，取值范围为 0 到 1。
1. **grayscale()**：将图像转换为灰度图像，接收一个参数表示灰度程度，取值范围为 0 到 1。
1. **hue-rotate()**：调整图像的色相，接收一个参数表示旋转的角度，单位为度。
1. **invert()**：将图像进行反相处理，接收一个参数表示反相程度，取值范围为 0 到 1。
1. **opacity()**：调整元素的透明度，接收一个参数表示透明度值，取值范围为 0 到 1。
1. **saturate()**：调整图像的饱和度，接收一个参数表示饱和度值，取值范围为 0 到 100%。
1. **sepia()**：将图像转换为深褐色调，接收一个参数表示深褐色调程度，取值范围为 0 到 1。

除了这些常用的滤镜属性外，还有一些较少使用的滤镜属性，比如 drop-shadow()、url() 等。在使用滤镜时，可以通过链式调用多个滤镜来实现多种效果的组合。

#### 介绍一下 CSS 去色 filter？

CSS 去色可以通过 filter 属性实现。具体做法是将 filter 属性的值设置为 grayscale(100%)，这样就可以将元素的颜色全部去掉，变成灰色的图像。

特点：

1. 可以实现灰度化处理，将元素变成灰色图像。
1. 仅仅对视觉效果进行处理，不会对元素的实际颜色值进行修改。
1. 通过调整 filter 属性的值，可以控制灰度化的程度。

属性：

1. **filter**：指定元素的过滤效果，可以通过 grayscale 值来实现去色效果。
1. **grayscale**：指定元素的灰度化程度，取值范围为 0~100%，默认为 0。

以下是一个示例代码：

```
.element {
  filter: grayscale(100%);
}
```

需要注意的是，使用 filter 属性去色的效果是基于像素级别的图像处理，因此可能会导致图像的锐度和清晰度下降。同时，该属性不支持一些老旧的浏览器，因此在实际应用中需要注意兼容性问题。

#### 去色如何兼容浏览器和图片？

去色效果的兼容性问题主要集中在两个方面：浏览器兼容性和图片兼容性。

1. 浏览器兼容性

对于 filter 属性，一些老旧的浏览器可能不支持，因此需要针对不同的浏览器进行兼容性处理。可以通过检测浏览器类型和版本，以及使用浏览器厂商前缀等方式进行处理。另外，如果需要在旧版本的 IE 中使用去色效果，可以考虑使用 IE 的滤镜（filter）属性来实现。

```
/* IE 8 及以下版本浏览器 */
.element {
  /* 使用 IE 的滤镜属性实现去色效果 */
  filter: gray();
}
```

2. 图片兼容性

在使用去色效果时，有些图片可能会受到影响，比如一些带有透明度或半透明效果的图片。此时，需要考虑使用其他方式来避免影响图片的显示效果，比如针对图片进行特殊处理或者使用其他方式实现类似的效果。

总的来说，如果需要在实际项目中使用去色效果，需要对浏览器和图片进行充分的测试和调试，以确保效果正常，并在需要时进行相应的兼容性处理。

#### 部分背景图片之类的使用 filter 无法实现，要怎么处理？

如果需要对背景图片进行去色或其他滤镜效果，可以使用 CSS3 新增的 mix-blend-mode 属性来实现。

mix-blend-mode 属性定义了元素的背景和前景（即元素本身）的混合模式，可以实现各种特殊效果，包括去色、叠加、滤色等。

具体实现方式如下：

首先在 CSS 样式中设置背景图片和 mix-blend-mode 属性：

```
.element {
  /* 设置背景图片 */
  background-image: url("bg.jpg");
  /* 设置 mix-blend-mode 属性 */
  mix-blend-mode: saturation;
}
```

在上述代码中，mix-blend-mode 属性的值为 saturation，表示使用饱和度混合模式，可以实现去色效果。

如果需要在背景图片上添加其他元素（如文本、图标等），可以将这些元素放置在一个容器元素内，并将容器元素的 mix-blend-mode 属性设置为与背景图片相同的值，从而实现与背景图片相同的混合模式效果。

```
<div class="container">
  <h1>Hello World!</h1>
  <p>This is a demo text.</p>
</div>
```

```
.container {
  /* 设置 mix-blend-mode 属性 */
  mix-blend-mode: saturation;
}
```

需要注意的是，mix-blend-mode 属性并不是所有浏览器都支持，而且不同浏览器对于支持的混合模式也有所差异，因此在使用时需要进行兼容性测试和调整。
