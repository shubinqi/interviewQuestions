<!--
 * @Author: Shu Binqi
 * @Date: 2023-03-19 21:12:26
 * @LastEditors: Shu Binqi
 * @LastEditTime: 2023-03-23 21:52:46
 * @Description: HTTP
 * @Version: 1.0.0
 * @FilePath: \interviewQuestions\前端基础\计算机\HTTP\HTTP.md
-->

> 参考书籍：《图解 HTTP》

#### HTTP 3.0 是什么？有什么优缺点？

**HTTP 3.0** 是下一代 HTTP 协议，目前仍在开发中。HTTP 3.0 基于 QUIC 协议，而 QUIC 协议是由 Google 开发的一种可靠的 UDP 传输协议，旨在解决 TCP 协议的一些问题。HTTP 3.0 和 HTTP 2.0 相比，有以下优点[4]:

1. **更快的速度**：HTTP 3.0 使用 QUIC 协议，可以降低延迟，提高速度。
1. **更好的流控制**：HTTP 3.0 采用了一个称为"QUIC Stream"的新的流控制机制，使得在网络拥塞的情况下，数据传输更为可靠。
1. **更好的头部压缩**：HTTP 3.0 使用了一种新的头部压缩算法，称为 QPACK，使得头部压缩更为高效。

HTTP 3.0 相比 HTTP 2.0 也存在一些缺点:

1. **兼容性问题**：将现有的 Web 应用程序从 HTTP 2.0 迁移到 HTTP 3.0 需要更改现有的应用程序代码，这可能需要一些时间。
1. **代理问题**：HTTP 3.0 使用 QUIC 协议，而 QUIC 协议使用 UDP 协议，这意味着现有的 HTTP 代理可能无法处理 HTTP 3.0 流量。
1. **增加服务器负担**：HTTP 3.0 使用 QUIC 协议中的多路复用功能，可以在一个连接上同时发送多个请求。这可能会导致服务器的负载增加。

HTTP 2.0 相比 HTTP 1.1，有以下优点:

1. **头部压缩**：HTTP 2.0 对头部进行了压缩，减少了传输的数据量，从而提高了性能。
1. **多路复用**：HTTP 2.0 可以在一个连接上同时发送多个请求，从而减少了连接的数量，提高了性能。
1. **服务器推送**：HTTP 2.0 支持服务器推送，可以将客户端需要的资源提前推送到客户端，从而提高了性能。

但是，HTTP 2.0 也存在一些缺点:

1. **队头阻塞**：HTTP 2.0 中的多路复用功能解决了 HTTP 的队头阻塞但是没有解决 TCP 的队头阻塞问题，即一个请求的延迟可能会影响到后续请求的处理。
1. **TCP 连接的建立延时**：HTTP 2.0 使用了 TLS 加密，因此在建立连接时需要进行 TLS 握手，这会增加连接的建立延时。
1. **多路复用容易 Timeout**：HTTP 2.0 中的多路复用功能可能会导致大量请求同时发送，而每个流的资源会被稀释，可能会导致某些请求超时。

总的来说，HTTP 3.0 相比 HTTP 2.0 有更快的速度和更好的流控制，但是需要兼容性升级，可能会增加服务器负担。HTTP 2.0 相比 HTTP 1.1 有更好的头部压缩和多路复用功能，但是存在队头阻塞和 TCP 连接建立延时等问题。

#### HTTP 超文本传输协议（HyperText Transfer Protocol）严谨而言应译为超文本转移协议

HTTP（超文本传输协议）是一种在 Web 上进行数据通信的协议。它是一种客户端-服务端协议，也就是说，请求通常由称为客户端的接收方发起，然后由称为服务端的发送方响应。在一个 Web 浏览器中，客户端可能是一个浏览器，而包含网页的应用程序则是服务端。

HTTP 协议定义了客户端和服务端之间交换的信息格式，以及在这些信息交换中所采取的操作。HTTP 协议通过 TCP/IP 协议族来传输数据。默认情况下，HTTP 使用 80 端口。HTTP/2 使用 443 端口。

HTTP 协议是一个无状态协议，这意味着服务器不会在两个请求之间保留任何数据（状态）。这是为了确保协议的简单性和可伸缩性。

HTTP 协议可以控制许多 Web 功能，如缓存和认证。它还可以通过修改标头来开放同源限制，以便将 Web 文档组装在不同的域中。

HTTP/2 取代了 HTTP 流水线，因为 HTTP 流水线很难在现有的网络中实现，HTTP/2 在有多个请求的情况下表现更加稳定。

HTTP 协议是一种简单、可扩展的协议，其设计简单易读，允许简单测试，降低了门槛，对新人很友好。HTTP 报文能够被人读懂，其报文的基本结构自 HTTP/1.0 发布以来一直没有变化。

HTTP 工作原理：

1. 客户端发送 HTTP 请求报文给服务器。
1. 服务器接收请求并返回 HTTP 响应报文。
1. 客户端从响应中获取所需信息。

### TCP/IP 协议族

#### TPC/IP 协议族是什么？

TCP/IP 是 Internet 最基本的协议，是用于因特网（Internet）的通信协议。TCP/IP 协议由网络层的 IP 协议和传输层的 TCP 协议组成。TCP/IP 协议定义了电子设备，如计算机，如何连入因特网，以及数据如何在它们之间传输的标准。TCP/IP 协议中的应用层协议有 Telnet、FTP、SMTP 等，是用来接收来自传输层的数据或者按不同应用要求与方式将数据传输至传输层。传输层的主要协议有 UDP、TCP，是使用者使用平台和计算机信息网内部数据结合的通道，可以实现数据传输与数据共享。

TCP/IP 通信协议是对计算机必须遵守的规则的描述，只有遵守这些规则，计算机之间才能进行通信。TCP 提供 IP 环境下的数据可靠传输，它提供面向连接的、可靠的数据传输服务，这种服务只有在建立了连接之后才能传输数据。而 UDP 提供的是无连接的协议，它不需要建立连接就可以直接进行数据传输，但是它不能保证数据传输的可靠性。

计算机与网络设备之间如果要相互通信，双方就必须基于相同的方法。不同的硬件、操作系统之间的通信，所有这一切都需要一种规则。TCP/IP 协议就是这样一种规则。TCP/IP 协议是一种通信协议，它是用于因特网的通信协议。它定义了数据如何在因特网上进行通信传输，也是因特网的基础。

#### TCP/IP 四层网络模型

TCP/IP 协议族包括数据的发送、与硬件的交互、消息路由规则、格式定义、错误验证等功能，而这些功能对应的协议规范被统称为 TCP/IP 协议族。

TCP/IP 划分了四层网络模型，包括应用层、传输层、网络层和数据链路层。 具体来说，四层网络协议的作用如下：

1. 应用层负责各种不同应用之间的协议，如浏览器的 HTTP 协议、电子邮件的 STMP 协议等。
1. 传输层负责可靠传输的 TCP 协议、高效传输的 UDP 协议。
1. 网络层负责寻址（准确找到对方设备）的 IP 协议。
1. 数据链路层负责将数字信号在物理通道（网线）中准确传输。

TCP/IP 协议族包括 TCP、IP、SMTP、FTP、HTTP 等协议，它们与 TCP 或 IP 的关系紧密，是实现互联网必不可少的组成部分。

TCP/IP 协议族被称为网际协议群，因为它是为使用互联网而开发制定的协议族。因此，互联网的协议就是 TCP/IP，TCP/IP 就是互联网的协议。

TCP/IP 四层模型包括应用层、传输层、网络层和数据链路层。 具体来说，四层模型的作用如下：

1. 应用层主要有负责 web 浏览器的 HTTP 协议，文件传输的 FTP 协议，负责电子邮件的 SMTP 协议，负责域名系统的 DNS 等。
1. 传输层主要是有可靠传输的 TCP 协议，特别高效的 UDP 协议。主要负责传输应用层的数据包。
1. 网络层主要是 IP 协议。主要负责寻址（找到目标设备的位置）。
1. 数据链路层主要是负责转换数字信号和物理二进制信号。

通过四层模型可以将应用层的具体数据传输给对应设备。 例如，在两台电脑都使用浏览器的情况下，需要发送一个 index.html 文件，TCP 协议会将 HTTP 协议发送的数据看作一个数据包，并在这个数据包前面加上 TCP 包的一部分信息（部首）。在网络层，IP 协议会将 TCP 协议要发送的数据看作一个数据包，同样的在这个数据包前端加上 IP 协议的部首。在数据链路层，对应的协议也会在 IP 数据包前端加上以太网的部首。

除了 TCP/IP 四层模型外，还有一种是五层协议的体系结构，将网络接口层分为了数据链路层和物理层，但在实际的应用中还是使用 TCP/IP 四层模型的。

#### TCP/IP 五层协议

TCP/IP 协议分层模型在不同的资料中有所不同，但大体上都是类似的。网络层和传输层是 TCP/IP 协议中最核心的部分，表示层和应用层则是在这两个层次之上提供更高级别的服务。

TCP/IP 五层模型是一种网络协议模型，它将 OSI 七层模型简化为五层。TCP/IP 协议是互联网的基础协议，没有它就无法上网，任何与互联网有关的操作都离不开 TCP/IP 协议。TCP/IP 五层模型包括以下五层：

1. **应用层**（Application Layer）：应用层为用户提供服务，例如电子邮件、文件传输和终端仿真等。应用层还包括 HTTP 协议、FTP 协议、SMTP 协议等。
1. **传输层**（Transport Layer）：传输层主要负责数据的传输和分段。TCP 协议和 UDP 协议都属于传输层。TCP 协议提供可靠的、面向连接的数据传输服务，而 UDP 协议则提供无连接的数据传输服务。
1. **网络层**（Network Layer）：网络层负责对子网间的数据包进行路由选择。此外，网络层还可以实现拥塞控制、网际互连等功能。网络层的主要协议是 IP 协议。常见的协议有 IP、ICMP、ARP 等。
1. **数据链路层**（Data Link Layer）：数据链路层为网络层提供可靠的数据传输，主要的协议是以太网协议。数据链路层的基本数据单位是帧。常见的协议有以太网、PPP 等。
1. **物理层**（Physical Layer）：物理层负责将比特流传输到物理媒介上，例如网线、光缆等。常见的协议有 RS-232、V.35 等。

TCP/IP 五层模型与 OSI 七层模型对应关系如下：

1. 应用层、表示层和会话层对应于 TCP/IP 五层模型的应用层；
1. 传输层对应于 TCP/IP 五层模型的传输层；
1. 网络层对应于 TCP/IP 五层模型的网络层；
1. 数据链路层和物理层对应于 TCP/IP 五层模型的数据链路层和物理层。

TCP/IP 五层协议中每一层都有自己的专属协议，完成自己相应的工作以及与上下层级之间进行沟通。TCP/IP 协议不同于 OSI 七层模型，但是这两种模型的对应关系是相似的。

数据链路层为网络层提供可靠的数据传输，基本数据单位为帧，主要的协议是以太网协议，两个重要设备名称是网桥和交换机。网络层负责对子网间的数据包进行路由选择，基本数据单位为 IP 数据报，包含的主要协议是 IP 协议。

IP 协议是 TCP/IP 协议的核心，所有的 TCP、UDP、IMCP、IGCP 的数据都以 IP 数据格式传输。IP 数据包分为 head 和 data 部分，长度为 20 到 60 字节，最长为 65,515 字节。而以太网数据包的“数据”部分，最长只有 1500 字节。因此，如果 IP 数据包超过了 1500 字节，它就需要分割成几个以太网数据包，分开发送了。

TCP 协议是可靠的协议，UDP 协议不可靠，但是网络开销小。TCP 协议虽然安全性很高，但是网络开销大，而 UDP 协议虽然没有提供安全机制，但是网络开销小，在现在这个网络安全已经相对较高的情况下，为了保证传输的速率，我们一般还是会优先考虑 UDP 协议。

#### TCP/IP 通信传输流

TCP/IP 是一组协议，包括 IP、TCP、ICMP、UDP、TELNET、FTP、HTTP 等协议，是互联网进行通信时所必须用到的协议群的统称，因此，有时也称 TCP/IP 为网际协议群。TCP/IP 一词泛指这些协议，因此，TCP/IP 就是互联网的协议。

TCP/IP 通信传输一般分为五层协议：应用层、传输层、网络层、数据链路层、物理层。

TCP 提供面向有连接的通信传输，即在数据通信开始之前先做好两端之间的准备工作。所谓三次握手是指建立一个 TCP 连接时需要客户端和服务器端总共发送三个包以确认连接的建立。在 socket 编程中，这一过程由客户端执行 connect 来触发。

TCP/IP 数据传输流程如下：

1. 客户端在应用层发出一个 HTTP 请求。
1. 在传输层，TCP 协议将从应用层处收到的数据进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。
1. 在网络层，IP 协议增加作为通信目的地的 MAC 地址后转发给数据链路层。
1. 在数据链路层，进行差错控制，提供数据帧在信道上无差错的传输，并进行各电路上的动作系列。
1. 在物理层，建立相邻节点之间的数据链路，通过差错控制提供数据帧在信道上无差错的传输，并进行各电路上的动作系列。
1. 当服务端在链路层接收到数据时，按序往上层发送，一直到应用层。当传输到应用层时，才算真正的接收到由客户端发送过来的请求。

#### TCP 协议

TCP 协议是一种面向连接的、可靠的、字节流传输的协议，属于传输层协议。TCP 协议提供的服务包括数据流传送、可靠性、有效流控、全双工操作和多路复用，通过面向连接、端到端和可靠的数据包发送。与 TCP 不同，UDP 协议是一种不可靠的、无连接的服务，不提供可靠性、流控或差错恢复功能。TCP 对应的是可靠性要求高的应用，而 UDP 对应的则是可靠性要求低、传输经济的应用。TCP/IP 协议族是基于 TCP 和 IP 这两个最初的协议之上的不同的通信协议的大集合。TCP/IP 协议与低层的数据链路层和物理层无关，这也是 TCP/IP 的重要特点。

TCP 协议用序列号对数据包进行标记，以便在到达目的地后重新重装，序列号是由计算机生成的随机数作为序列号的初始值。TCP 首部最小为 20 字节，这 20 字节分为 5 行，每行 4 个字节也就是 32 个位。TCP 首部各字段的意义和作用如下：

1. **数据偏移**：占 0.5 个字节 (4 位)，指出 TCP 报文段的首部长度，它指出了 TCP 报文段的数据起始处距离 TCP 报文的起始处有多远。
1. **序号**：TCP 用序列号对数据包进行标记，以便在到达目的地后重新重装，假设当前的序列号为 s，发送数据长度为 l，则下次发送数据时的序列号为 s+l。
1. **推送**：当 PSH=1 的时候，表示该报文段高优先级，接收方 TCP 应该尽快推送给接收应用程序，而不用等到整个 TCP 缓存都填满了后再交付。
1. **校验和**：占 2 个字节，由发送端填充，接收端对 TCP 报文段执行 CRC 算法，以检验 TCP 报文段在传输过程中是否损坏，如果损坏则丢弃。检验范围包括首部和数据两部分，这也是 TCP 可靠传输的一个重要保障。

TCP 协议是一种面向连接的、可靠的、字节流传输的协议，它是全双工的，即双方的数据读写可通过一个连接进行。在 TCP 协议中，通信双方必须先建立连接，通信双方必须为该连接分配必要的内核资源，以管理连接的状态和连接上数据的传输。完成数据交换之后，通信双方都必须断开连接以释放资源。

#### IP 网络协议

IP（Internet Protocol）是互联网通信的基础协议，它是 OSI 参考模型中的第 3 层——网络层。IP 协议通过分组交换技术，将数据分成若干个数据包进行传输。IP 数据包在以太网数据包的负载里面，TCP 数据包在 IP 数据包的负载里面。IP 地址用于在“连接到网络中的所有主机中识别出进行通信的目标地址”，因此，在 TCP/IP 通信中所有主机或路由器必须设定自己的 IP 地址。IP 地址由 32 位正整数来表示，一般以每 8 位为一组，分成 4 组，每组以 “.” 隔开，再将每组数转换成十进制数。IP 地址由网络和主机两部分标识组成。IP 协议在实现终端节点之间的通信方面具有重要作用，也可以跨越不同的数据链路，即使是在不同的数据链路上也能实现两端节点之间的数据包传输。IP 协议还支持多播，用于将包发送给特定组内的所有主机，多播使用 D 类地址。IP 地址的网络地址部分用于进行路由控制，路由控制表中记录着网络地址与下一步应该发送至路由器的地址。IPv6 中 IP 地址的标记方法与 IPv4 不同，将 128 比特 IP 地址以每 16 比特为一组，每组用冒号（“：”）隔开进行标记。IP 协议在通信过程中还需要有能够解析主机名称和 MAC 地址的功能，以及数据包在发送过程中异常情况处理的功能。

#### OSI 七层模型

OSI 七层模型是一个用于计算机或通信系统间互联的标准体系，由国际标准化组织（ISO）制定。该模型包括以下七层：

1. **物理层**：该层负责管理通信设备和网络媒体之间的互联互通，传输介质为数据链路层提供物理连接，实现比特流的透明传输。
1. **数据链路层**：该层提供介质访问和链路管理，接收来自物理层的位流形式的数据，封装成帧，传送到网络层，将网络层的数据帧，拆装为位流形式的数据转发到物理层，负责建立和管理节点间的链路，通过各种控制协议，将有差错的物理信道变为无差错的、能可靠传输数据帧的数据链路。
1. **网络层**：该层控制数据链路层与传输层之间的信息转发，建立、维持和终止网络的连接，数据链路层的数据在这一层被转换为数据包，然后通过路径选择、分段组合、顺序、进/出路由等控制，将信息从一个网络设备传送到另一个网络设备。
1. **传输层**：该层建立主机端到端的链接，为会话层和网络层提供端到端可靠的和透明的数据传输服务，确保数据能完整的传输到网络层。
1. **会话层**：该层接收来自传输层的数据，负责建立、管理和终止表示层实体之间的通信会话，支持它们之间的数据交换。
1. **表示层**：该层提供各种用于应用层数据的编码和转换功能，确保一个系统的应用层发送的数据能被另一个系统的应用层识别。如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据格式转换成通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。
1. **应用层**：该层为应用程序或用户请求提供各种请求服务，是 OSI 参考模型最高层，也是最靠近用户的一层，为计算机用户、各种应用程序以及网络提供接口，也为用户直接提供各种网络服务。

常见协议

1. **应用层**：HTTP、SMTP、SNMP、FTP、Telnet、SIP、SSH、NFS、RTSP、XMPP、Whois、ENRP、等等
1. **表示层**：XDR、ASN.1、SMB、AFP、NCP、等等
1. **会话层**：ASAP、SSH、RPC、NetBIOS、ASP、Winsock、BSD Sockets、等等
1. **传输层**：TCP、UDP、TLS、RTP、SCTP、SPX、ATP、IL、等等
1. **网络层**：IP、ICMP、IGMP、IPX、BGP、OSPF、RIP、IGRP、EIGRP、ARP、RARP、X.25、等等
1. **数据链路层**：以太网、令牌环、HDLC、帧中继、ISDN、ATM、IEEE 802.11、FDDI、PPP、等等
1. **物理层**：例如铜缆、网线、光缆、无线电等等

#### DNS 是什么？

DNS（Domain Name System，域名系统）是一种分布式数据库，用于将域名和 IP 地址相互映射，使用户可以更方便地访问互联网，而不必记住 IP 地址。DNS 协议运行在 UDP 协议之上，使用端口号 53。DNS 的分布数据库是以域名为索引的，每个域名实际上就是一棵很大的逆向树中路径，这棵逆向树称为域名空间。缓存域名服务器通过向其他域名服务器查询获得域名到 IP 地址记录，将域名查询结果缓存到本地，提高重复查询时的速度。

#### DNS 有什么作用？

DNS 的作用是将域名和 IP 地址相互映射，使用户可以更方便地访问互联网，而不必记住 IP 地址。当用户在应用程序中输入 DNS 名称时，DNS 服务可以将此名称解析为与之相关的其他信息，如 IP 地址。DNS 服务器是域名系统或域名服务，为 Internet 上的主机分配域名地址和 IP 地址。用户使用域名地址，该系统就会自动把域名地址转为 IP 地址。执行域名服务的服务器称之为 DNS 服务器，通过 DNS 服务器来应答域名服务的查询。靠 DNS 把你要访问的网址找到然后把信息送到你电脑上。

#### URI 和 URL 是 Web 上资源的标识符。它们之间有联系和区别，可以从以下几个方面进行理解：

URI 是 Uniform Resource Identifier（统一资源标识符）的缩写，表示 Web 上每一种可用的资源，如 HTML 文档、图像、视频片段、程序等都是由一个 URI 进行标识的。URI 可以分为 URL 和 URN 两种，或同时具备 locators 和 names 特性的一种东西。URN 作用就好像一个人的名字，URL 就像一个人的地址。换句话说：URN 确定了东西的身份，URL 提供了找到它的方式。

1. URL 是 Uniform Resource Locator（统一资源定位符）的缩写，是 URI 的一种实现方式。URL 不仅表示请求服务器的路径，还同时说明如何访问这个资源，比如使用哪种协议（http、https 等）。URL 是 URI 的一个子集，属于 URI 更具体的实现形式。
1. URI 属于 URL 更高层次的抽象，一种字符串文本标准。URI 可以表示任何东西的标识符，而 URL 只表示可通过网络访问的资源的标识符。也就是说，URI 是 URL 的父类，而 URL 是 URI 的子类。
1. URI 和 URL 的关系可以用包含关系来表示。URI 包含 URL，而 URL 是 URI 的一种具体实现。
1. URI 和 URL 的区别可以用一个简单的例子来说明。一个人的名字是这个人的 URN，而这个人的地址是这个人的 URL。URN 确定了这个人的身份，而 URL 则提供了找到这个人的方式。

综上所述，URI 和 URL 是 Web 上资源的标识符，URI 是 URL 更高层次的抽象，URL 是 URI 的一种具体实现。URI 可以表示任何东西的标识符，而 URL 只表示可通过网络访问的资源的标识符。可以用包含关系来表示 URI 和 URL 的关系，一个简单的例子是一个人的名字是这个人的 URN，而这个人的地址是这个人的 URL。

URI 的格式有以下几部分：

1. scheme：协议名称，例如 http、ftp、mailto 等；
1. authority：存放资源的主机名，可以包括端口号；
1. path：资源的具体地址，由多个路径段组成；
1. query：请求参数，例如?key1=value1&key2=value2；
1. fragment：文档内的锚点，例如#section1。
