<!--
 * @Author: Shu Binqi
 * @Date: 2023-03-02 09:01:34
 * @LastEditors: Shu Binqi
 * @LastEditTime: 2023-03-02 09:11:55
 * @Description: 八股文：TCP 三次握手四次挥手
 * @Version: 1.0.0
 * @FilePath: \interviewQuestions\八股文\TCP三次握手四次挥手.md
-->

#### 介绍一下 TCP 三次握手四次挥手

TCP（Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议。在 TCP 通信过程中，建立连接需要进行三次握手，断开连接需要进行四次挥手。

**三次握手**

在 TCP 通信开始前，需要先进行三次握手来建立连接：

1. **第一次握手（SYN）**：客户端向服务器发送 SYN 报文，其中包含一个随机序列号 X，表示客户端准备连接服务器。
1. **第二次握手（SYN+ACK）**：服务器收到 SYN 报文之后，向客户端发送 SYN+ACK 报文，其中包含了确认号 ACK=X+1，表示服务器已经接收到客户端的请求，可以建立连接。
1. **第三次握手（ACK）**：客户端收到 SYN+ACK 报文之后，向服务器发送 ACK 报文，其中包含确认号 ACK=X+1，表示客户端已经接收到了服务器的确认，连接建立成功。

此时，TCP 连接已经建立起来了，客户端和服务器可以开始进行数据传输。

**四次挥手**

在 TCP 通信结束后，需要进行四次挥手来断开连接：

1. **第一次挥手（FIN）**：客户端向服务器发送 FIN 报文，表示客户端已经不会再发送数据了。
1. **第二次挥手（ACK）**：服务器收到 FIN 报文之后，向客户端发送 ACK 报文，表示服务器已经接收到了客户端的请求，但是还有数据需要传输。
1. **第三次挥手（FIN）**：服务器传输完数据之后，向客户端发送 FIN 报文，表示服务器已经不会再发送数据了。
1. **第四次挥手（ACK）**：客户端收到 FIN 报文之后，向服务器发送 ACK 报文，表示客户端已经接收到了服务器的请求，可以断开连接。

这样，TCP 连接就断开了。

#### 为什么需要三次握手和四次挥手

三次握手和四次挥手是为了保证 TCP 连接的可靠性和正确性。三次握手的目的是确保双方都能够收到对方的请求和确认信息，避免因为网络延迟或者丢包等原因导致连接建立失败。四次挥手的目的是确保双方都能够安全地断开连接，避免因为网络不稳定或者其他原因导致连接没有彻底断开，从而浪费资源或者引起其他问题。
