<!--
 * @Author: Shu Binqi
 * @Date: 2023-03-04 22:43:56
 * @LastEditors: Shu Binqi
 * @LastEditTime: 2023-03-04 22:43:58
 * @Description: 八股文：跨域+同源策略（6题）
 * @Version: 1.0.0
 * @FilePath: \interviewQuestions\八股文\JavaScript\跨域.md
-->

#### 什么是同源策略？同源策略主要是针对什么的？

同源策略是浏览器的一种安全策略，它限制了一个源（协议、域名、端口）的文档或脚本如何能够与另一个源的资源进行交互。同源策略的主要针对对象包括：

1. Cookie、LocalStorage 和 IndexDB 等网页存储数据的 API，这些 API 在同源策略下只允许与相同源的页面进行交互，而不能够访问不同源的数据。
1. AJAX 请求，使用 XMLHttpRequest 发起的 AJAX 请求也受到同源策略的限制，只能向同源服务器发起请求。
1. DOM 操作，不同源的页面之间也不能够互相修改对方的 DOM 结构。

同源策略是保护用户信息安全的重要措施，通过限制网页与其他源进行交互，可以有效避免恶意网站通过跨域攻击窃取用户的敏感信息。

#### 什么是跨域？

**跨域**（Cross-Origin）指的是在浏览器的同源策略下，一个网页无法请求另一个网页的资源，即浏览器禁止跨域请求。

同源策略规定了浏览器只能向同一域名、端口和协议发送请求，而不能向不同域名、端口或协议发送请求。例如，如果当前网页的域名为 example.com，则该网页只能请求 example.com 域名下的资源，而不能请求其他域名下的资源。

跨域请求的存在主要是为了提高资源的利用效率和服务的可扩展性，但也可能会带来一些安全问题，如 CSRF 攻击等。因此，在跨域请求时需要采取一些措施来保障安全性。常见的跨域解决方案包括 JSONP、CORS、代理等。

#### 跨域有哪些解决方法？（建议写博客）

跨域问题指的是在 Web 应用程序中，当前页面所在的域名和请求的资源所在的域名不一致，从而出现了跨域问题。为了保证 Web 应用程序的安全性，浏览器默认采用了同源策略，限制了跨域请求，因此需要采用一些方法解决跨域问题，主要有以下几种：

1. **JSONP**：通过在页面上动态插入一个 script 标签，请求一个带有参数的地址，服务器端将数据封装在一个指定的回调函数中返回，前端页面接收到数据后就可以通过回调函数进行处理。
1. **CORS**：跨域资源共享，通过设置 HTTP 响应头，允许指定的域名下的网页访问资源。服务器端对于需要跨域的资源，在响应中加入 Access-Control-Allow-Origin 头信息，表示允许哪些源访问这个资源。
1. **代理**：通过将跨域请求发送给同域下的服务器，由服务器代为请求资源并返回，这样就避免了跨域问题。可以使用 http-proxy-middleware 等代理工具。
1. **WebSocket**：WebSocket 是 HTML5 中的新协议，它实现了浏览器与服务器全双工通信，可以在不受同源策略限制的情况下进行跨域通信。
1. **postMessage**：HTML5 新增的特性，可以在不同窗口之间跨域传递消息，可以利用这个特性实现跨域通信。
1. **Nginx 反向代理**：通过在服务器端设置反向代理，将所有请求代理到同一域名下，从而避免了跨域问题。

需要根据具体的情况来选择不同的解决方案。

#### JsonP 怎么实现跨域？有什么优缺点？

JsonP 是一种利用 &lt;script&gt; 标签的跨域方法，通过在请求 URL 中添加一个回调函数名，服务器返回一个 JavaScript 脚本文件，其中包含回调函数调用和数据的 JSON 对象，浏览器解析该脚本后就可以执行回调函数，从而实现跨域获取数据。

JsonP 的优点是兼容性好，能够兼容大部分浏览器，而且使用方便，只需要添加一个回调函数名即可。但缺点也比较明显，比如只支持 GET 请求方式，不支持 POST 等其他请求方式，不安全，容易被恶意代码利用，还有可能会导致 XSS 攻击。
